# CSS

## 1. Introduction

**A. 认识 CSS**

CSS，全称层叠样式表 (Cascading Style Sheets)，是一种用来描述 HTML 或 XML文档怎样呈现的样式表语言。简单来说，HTML 负责搭建网页的骨架和内容（比如标题、段落、图片），而 CSS 则负责这些内容的“外观”，比如颜色、字体、间距、布局等。

**B. CSS 在网页开发中的核心作用**

CSS 的核心作用在于**表现与内容分离**。在没有 CSS 的时代，很多样式信息（如字体颜色）不得不直接写在 HTML 标签里，这使得 HTML 代码冗长、混乱，且难以维护。CSS 的出现彻底改变了这一状况：

1. **美化网页**：这是 CSS最直观的作用。通过 CSS，您可以精确控制网页上几乎所有元素的视觉表现。
2. **提高可维护性**：将样式信息从 HTML 中分离出来，存放在单独的 CSS 文件中，使得修改样式变得非常方便。例如，要改变网站所有一级标题的颜色，只需修改 CSS 文件中的一条规则，而无需逐个修改 HTML 文件。
3. **提升用户体验**：一个美观、布局合理的网页能给用户带来更好的浏览体验。CSS 还可以实现响应式设计，使网页在不同尺寸的设备（如电脑、平板、手机）上都能良好显示。
4. **代码更清晰**：HTML 专注于结构和内容，CSS 专注于表现，各司其职，使得代码更加清晰易懂。

**C. HTML 与 CSS 如何协同工作？**

HTML 和 CSS 是网页开发中密不可分的伙伴。它们协同工作的基本流程如下：

1. **HTML 构建结构**：浏览器首先加载 HTML 文档，解析其中的标签，构建出页面的基本结构和内容 10。
2. **CSS 提供样式规则**：浏览器接着会加载并解析 CSS 样式表。CSS 样式表包含一系列“规则”，每条规则定义了要选择哪些 HTML 元素，以及如何改变它们的样式。
3. **浏览器应用样式**：浏览器根据 CSS 规则，将相应的样式应用到 HTML 元素上，最终将带有样式的网页内容渲染（绘制）到屏幕上，呈现给用户。

## 2. 语法

### **A. CSS 的基本语法：“选择器”和“声明块”**

CSS 的语法非常直观。一条基本的 CSS 规则由两部分组成：**选择器 (Selector)** 和 **声明块 (Declaration Block)** 。

```css
选择器 {
  属性名1: 属性值1;
  属性名2: 属性值2;
  /* 更多属性... */
}
```

- **选择器 (Selector)**：它指向您想要设置样式的 HTML 元素。例如，`p` 选择器会选中页面中所有的 `<p>` (段落) 元素。
- **声明块 (Declaration Block)**：它由一对花括号 `{}` 包裹，里面包含一条或多条**声明 (Declaration)**。
- **声明 (Declaration)**：每条声明由一个 **CSS 属性名 (Property)** 和一个 **属性值 (Value)** 组成，它们之间用冒号 `:` 分隔，并且每条声明的末尾必须有一个分号 `;`。

例如，下面的 CSS 规则会将所有 `<h1>` (一级标题) 元素的文本颜色设置为红色，字体大小设置为 24 像素：

```css
h1 {
  color: red;
  font-size: 24px;
}
```

这里：

- `h1` 是选择器。
- `{ color: red; font-size: 24px; }` 是声明块。
- `color: red;` 和 `font-size: 24px;` 是两条声明。
- `color` 和 `font-size` 是属性名，`red` 和 `24px` 是对应的属性值。

### **B. 三种将 CSS 添加到 HTML 的方式**

有三种主要的方法可以将 CSS 应用到 HTML 文档中：

#### 1. **外部样式表 (External Stylesheet)**

- **做法**：将所有的 CSS 规则写在一个单独的以 `.css` 为后缀的文件中（例如 `style.css`），然后在 HTML 文档的 `<head>` 部分使用 `<link>` 标签将其链接进来。

- HTML 中的代码示例：

  ```html
  <!DOCTYPE html>
  <html>
  <head>
    <title>我的网页</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    </body>
  </html>
  ```

- `style.css` 文件内容示例：

  ```css
  body {
    background-color: lightblue;
  }
  h1 {
    color: navy;
  }
  ```

- 这是最推荐的方式，尤其适用于多页面的网站。它能实现样式与内容的最大程度分离，提高代码的可维护性和复用性。修改一个 `.css` 文件可以改变整个网站的外观。

#### 2. 内部样式表 (Internal Stylesheet)

1. - **做法**：将 CSS 规则直接写在 HTML 文档的 `<head>` 部分，并用 `<style>` 标签包裹起来。

   - HTML 中的代码示例：

     ```html
     <!DOCTYPE html>
     <html>
     <head>
       <title>我的网页</title>
       <style>
         body {
           background-color: lightyellow;
         }
         p {
           color: green;
         }
       </style>
     </head>
     <body>
       <h1>欢迎</h1>
       <p>这是一个段落。</p>
     </body>
     </html>
     ```
     
   - **优点**：适用于单个 HTML 页面的特殊样式，或者当您无法访问外部文件时。

   - **缺点**：如果多个页面需要相同的样式，则需要在每个页面中重复定义，不利于维护 。

   - **何时使用**：当样式仅应用于单个页面，或者作为临时测试时。

#### 3. **内联样式 (Inline Styles)**

- **做法**：将 CSS 规则直接写在 HTML 元素的 `style` 属性中 。

- HTML 中的代码示例：

  ```html
  <p style="color: blue; margin-left: 20px;">这是一个内联样式的段落。</p>
  ```

- **优点**：可以针对单个元素进行非常精确的样式控制。

- **缺点**：严重破坏了内容与表现分离的原则，使得代码难以阅读和维护，应尽量避免使用 7。

- **何时使用**：仅在特殊情况下，例如需要动态通过 JavaScript 修改样式，或者在某些无法使用其他方式的邮件模板中。

## 3. CSS 选择器

要让 CSS 发挥作用，首先需要告诉浏览器您想为哪些 HTML 元素设置样式。这就是**选择器 (Selectors)** 的任务。

### **A. 基础选择器入门**

##### **元素选择器 (Element Selector / Type Selector)**

- **作用**：选择所有指定类型的 HTML 元素 。

- **语法**：直接使用 HTML 标签名。

- 示例：

  - HTML:

    ```html
    <h1>主标题</h1>
    <p>这是一个段落。</p>
    <p>这是另一个段落。</p>
    ```
    
  - CSS:
  
    ```css
    p {
      color: blue; /* 所有 <p> 元素的文本颜色将变为蓝色 */
    }
    h1 {
      text-align: center; /* 所有 <h1> 元素的文本将居中对齐 */
    }
    ```
  
- **说明**：这是最基础的选择器，会影响页面上所有同类型的标签。

##### **类选择器 (Class Selector)**

- **作用**：选择所有具有特定 `class` 属性值的 HTML 元素 。

- **语法**：以一个英文句点 `.` 开头，后面紧跟类名。类名由开发者自定义。

- 示例：

  - HTML:

    ```html
  <p class="highlight">这个段落需要高亮显示。</p>
    <div>这是一个普通的 div。</div>
  <span class="highlight">这段文字也需要高亮。</span>
    ```
    
  - CSS:
  
   ```css
 .highlight { background-color: yellow; font-weight: bold; }
   ```

- **说明**：类选择器非常灵活，一个元素可以拥有多个类名（用空格隔开，如 `class="highlight important"`），同一个类名也可以被多个不同类型的元素使用。这是 CSS 中最常用、也最推荐用于复用样式的选择器之一。

##### **ID 选择器 (ID Selector)**

- **作用**：选择具有特定 `id` 属性值的 HTML 元素 。

- **语法**：以一个井号 `#` 开头，后面紧跟 ID 名。ID 名由开发者自定义。

- 示例：

  - HTML:

    ```html
    <div id="main-navigation">主要的导航栏</div>
    <p id="introduction">网站介绍段落。</p>
    ```
    
  - CSS:
  
    ```css
    #main-navigation {
      padding: 10px;
      border: 1px solid gray;
    }
    ```
  
- **关键点**：在一个 HTML 文档中，**ID 值必须是唯一的** 。这意味着一个 ID 名只能赋予一个元素。ID 选择器通常用于定位页面中的独特结构元素，或者被 JavaScript 用来操作特定的 DOM 元素。虽然 ID 也可以用来定义样式，但由于其唯一性和高特异性，在纯粹的样式定义方面，类选择器通常是更好的选择。

### **B. 后代选择器**

除了单独使用基础选择器，我们还可以将它们组合起来，以更精确地定位元素。**后代选择器 (Descendant Selector)** 是其中一种非常实用的组合方式。

- **作用**：选择作为另一个元素后代（即嵌套在另一个元素内部，无论层级有多深）的元素 。

- **语法**：用一个或多个空格将两个或多个选择器隔开。左边的选择器是祖先元素，右边的选择器是要选择的后代元素。

- **示例**：

  - HTML:

    ```html
    <article class="news-item">
        <h2>新闻标题</h2>
        <p>这是新闻的第一段内容。</p>
        <div class="meta-info">
            <p>发布日期：2024-05-10</p>
        </div>
    </article>
    <p>这是文章外部的一个段落。</p>
    ```
    
  - CSS:

    ```css
    /* 选择所有 class 为 "news-item" 的元素内部的 <p> 元素 */
    .news-item p {
        line-height: 1.6;
        color: #333;
    }
    
    /* 选择所有 class 为 "meta-info" 的元素内部的 <p> 元素 */
    .meta-info p {
        font-size: 0.9em;
        color: #777;
    }
    ```

  - **说明**：在上面的例子中，`.news-item p` 会选中新闻标题下的第一段内容和发布日期那段内容，因为它们都是 `.news-item` 的后代 `<p>` 元素。而页面底部的“这是文章外部的一个段落”则不会被选中。`.meta-info p` 则只会选中发布日期那段内容。

### **C. 伪类**

CSS 不仅能定义静态样式，还能响应用户的某些行为。**伪类 (Pseudo-classes)** 就是用来定义元素特殊状态的关键字。`hover` 是一个非常常用的伪类。

- **作用**：当用户的鼠标指针悬停在某个元素上时，应用指定的样式 。

- **语法**：在选择器后面紧跟 `hover`。

- 示例：

  - HTML:

    ```html
    <a href="#">一个链接</a>
    <button>一个按钮</button>
    ```
    
  - CSS:
  
    ```css
    a:hover {
      color: red; /* 鼠标悬停时，链接文本变为红色 */
      text-decoration: underline; /* 鼠标悬停时，链接出现下划线 */
    }
    button:hover {
      background-color: lightgreen; /* 鼠标悬停时，按钮背景变为浅绿色 */
    }
    ```

**常见 CSS 选择器总结表**

| **选择器类型** | **语法示例**          | **示例 HTML**                                   | **示例 CSS**                           | **作用**                                                |
| :------------: | --------------------- | ----------------------------------------------- | -------------------------------------- | ------------------------------------------------------- |
|   元素选择器   | `p`                   | `<p>文本</p>`                                   | `p { color: blue; }`                   | 选中页面中所有的 `<p>` 元素                             |
|    类选择器    | `.classname`          | `<div class="info">信息</div>`                  | `.info { font-style: italic; }`        | 选中所有 `class` 属性值为 `info` 的元素                 |
|   ID 选择器    | `#idname`             | `<section id="main-content">主要内容</section>` | `#main-content { border: 1px solid; }` | 选中 `id` 属性值为 `main-content` 的元素 (页面中应唯一) |
|   后代选择器   | `ancestor descendant` | `<article> <p>段落</p> </article>`              | `article p { margin-bottom: 10px; }`   | 选中所有在 `<article>` 元素内部的 `<p>` 元素            |
|      伪类      | `selector:hover`      | `<button>按钮</button>`                         | `button:hover { opacity: 0.8; }`       | 当鼠标指针悬停在 `button` 元素上时，改变其透明度        |

## 4. 核心 CSS 属性

### **A. 文本造型**

文本是网页内容的核心，CSS 提供了丰富的属性来控制文本的显示效果。

#### 1. **`color`：文本颜色**

- 作用：设置元素内文本的颜色 。

- 常用属性值：

  - **命名颜色 (Named Colors)**：如 `red`, `blue`, `green`, `black`, `white` 等。
  - **十六进制颜色码 (HEX Codes)**：以 `#` 开头，后跟 6 位十六进制数（RRGGBB，分别代表红、绿、蓝的强度），如 `#FF0000` (红色)，`#0000FF` (蓝色)，`#333333` (深灰色)。也可以使用 3 位缩写形式，如 `#F00`。
  - **RGB 值 (RGB Values)**：使用 `rgb(红, 绿, 蓝)` 的形式，每个颜色分量的值从 0 到 255。例如 `rgb(255, 0, 0)` (红色)。
  - **RGBA 值 (RGBA Values)**：在 RGB 的基础上增加了 Alpha 透明度通道，`rgba(红, 绿, 蓝, 透明度)`，透明度从 0 (完全透明) 到 1 (完全不透明)。例如 `rgba(0, 0, 0, 0.5)` (半透明黑色)。

- 示例：

  CSS

  ```css
  .p{
      color: #333333; /* 将段落文字颜色设置为深灰色 */
  }
  
  .warning {
      color: red; /* 将 class 为 "warning" 的元素内文字颜色设置为红色 */
  }
  ```

#### 2. **`font-family`：字体家族**

- 作用：设置元素内文本的字体类型 (typeface) 。

- **字体栈 (Font Stack)**：通常我们会提供一个字体列表（称为字体栈），浏览器会按顺序尝试使用列表中的字体。如果用户的计算机上没有安装列表中的第一个字体，浏览器会尝试下一个，依此类推。

- **通用字体族 (Generic Font Families)**：在字体栈的末尾，通常会指定一个通用字体族作为最终的后备选项，如 `serif` (衬线体，如 Times New Roman)、`sans-serif` (无衬线体，如 Arial, Helvetica)、`monospace` (等宽字体，如 Courier New)。

- 示例：

  ```css
  body {
      font-family: Arial, Helvetica, sans-serif; /* 优先使用 Arial，其次 Helvetica，最后是通用的无衬线体 */
  }
  h1 {
      font-family: "Georgia", serif; /* 优先使用 Georgia，其次是通用的衬线体。如果字体名称包含空格，需要用引号括起来 */
  }
  ```

#### 3. **`font-size`：字体大小**

- 作用：设置元素内文本的尺寸 。

- 常用单位 (后续章节会详细介绍单位)：

  - `px` (pixels)：像素，绝对单位。
  - `em`：相对单位，相对于父元素的字体大小。
  - `rem` (root em)：相对单位，相对于根元素 (`<html>`) 的字体大小。
  - 百分比 (`%`)：相对于父元素的字体大小。

- 示例：

  ```css
  .h1{
      font-size: 32px;
  }
  .p{
      font-size: 1.2em; /* 段落字体大小是其父元素字体大小的1.2倍 */
  }
  .small-text {
      font-size: 0.8rem; /* class 为 "small-text" 的元素字体大小是根元素字体大小的0.8倍 */
  }
  ```

#### 4. **`text-align`：文本水平对齐**

- 作用：设置块级元素内部文本的水平对齐方式 。

- 常用属性值：

  - `left`：左对齐 (默认值)。
  - `right`：右对齐。
  - `center`：居中对齐。
  - `justify`：两端对齐 (文本会拉伸以填满容器宽度，但可能导致单词间距不均，需谨慎使用)。

- 示例：

  ```css
  .h1 {
      text-align: center; /* 标题居中 */
  }
  .content {
      text-align: justify; /* class 为 "content" 的元素内文本两端对齐 */
  }
  ```

### **B. 背景设定**

1. **`background-color`：背景颜色**

   - 作用：设置元素的背景颜色 。

   - 属性值与 `color` 属性类似，可以是命名颜色、HEX码、RGB(A)值等。

   - 示例：

     ```css
     .body {
         background-color: lightblue; /* 整个页面背景为浅蓝色 */
     }
     .highlight-box {
         background-color: #f0f0f0; /* class 为 "highlight-box" 的元素背景为浅灰色 */
     }
     ```
   
2. **`background-image`：背景图片 **

   - 作用：为元素设置背景图片 。

   - 属性值：使用 `url("图片路径或URL")` 来指定图片。

   - 示例：

     ```css
     div.pattern-bg {
         background-image: url("images/pattern.png");
     }
     ```
     
   - **注意**：背景图片还有很多相关属性，如 `background-repeat` (是否重复)、`background-position` (位置)、`background-size` (尺寸) 等，这些属于进阶内容，此处仅作简单介绍。

### **C. 盒模型 (Box Model) **

在 CSS 的世界里，**每一个 HTML 元素都被视为一个矩形的盒子** 。理解盒子模型是掌握 CSS 布局和样式的基石。
这个盒子由内到外包含以下几个层面：

1. **内容区 (Content)**：盒子的核心，显示元素的实际内容，如文本、图片等。其尺寸由 `width` 和 `height` 属性控制。
2. **内边距 (Padding)**：围绕在内容区周围的空白区域，位于内容区和边框之间。可以想象成是盒子内部的“填充物”。
3. **边框 (Border)**：包裹在内边距之外的线条。
4. **外边距 (Margin)**：边框以外的空白区域，用来控制元素与其他元素之间的间距。

可以把一个 HTML 元素想象成一个快递包裹：

- **内容 (Content)**：包裹里的商品。
- **内边距 (Padding)**：商品周围的泡沫或气泡膜，防止商品在包裹内晃动。
- **边框 (Border)**：包裹本身的纸板箱。
- **外边距 (Margin)**：这个包裹与其他包裹之间的距离。

**相关 CSS 属性：**

- `width` 和 `height`：控制元素内容区域的宽度和高度。
  * 示例：`div { width: 300px; height: 200px; }`
  
- `padding`：设置内边距。可以统一设置四个方向的内边距，也可以分别设置 。
- `padding: 10px;` (上下左右各 10px)
  - `padding: 10px 20px;` (上下 10px，左右 20px)
- `padding: 10px 20px 5px 15px;` (上 10px, 右 20px, 下 5px, 左 15px - 顺时针)
  - 单独设置：`padding-top`, `padding-right`, `padding-bottom`, `padding-left`。

- `margin`：设置外边距。用法与 `padding`类似 。
  - `margin: 15px;`
  - `margin: 10px auto;` (上下 10px，左右自动，常用于块级元素水平居中)
  - 单独设置：`margin-top`, `margin-right`, `margin-bottom`, `margin-left`。
  
- `border`：设置边框的宽度、样式和颜色。这是一个简写属性。
  - 示例：`div { border: 1px solid black; }` (1像素宽的黑色实线边框)
  - 可以分别设置：
    - `border-width`: 边框宽度 (如 `1px`, `2px`)
    - `border-style`: 边框样式 (如 `solid` 实线, `dashed` 虚线, `dotted` 点线, `double` 双线, `none` 无边框)
    - `border-color`: 边框颜色
  - 也可以针对单边设置，如 `border-top: 2px dashed red;`。

理解盒子模型至关重要，因为它决定了元素在页面上占据的空间以及元素之间的相对位置。当我们设置元素的宽度、高度、内边距、外边距和边框时，实际上就是在调整这个“盒子”的各个部分。这不仅影响单个元素的外观，更直接影响整个页面的布局。例如，增加一个元素的内边距会让其内容向内收缩，而增加外边距则会将其推离相邻的元素。

### **D. 元素行为**

`display` 属性是 CSS 中最强大的布局属性之一，它决定了元素在页面流中的渲染方式以及它如何与其他元素交互。

1. **`display: block;` (块级元素)**

   - 行为特征：

     - 独占一行：块级元素会从新的一行开始，并且其后的元素也会另起一行。
  - 宽度默认撑满父容器：在没有设置宽度的情况下，块级元素的宽度会自动扩展以填满其父元素的可用宽度。
     - 可设置宽高：可以显式地使用 `width` 和 `height` 属性来控制其尺寸。
     - 内外边距有效：`margin` 和 `padding` 在四个方向上都有效。
     
   - **常见默认块级元素**：`<h1>`-`<h6>`, `<p>`, `<div>`, `<ul>`, `<ol>`, `<li>`, `<form>`, `<header>`, `<footer>`, `<section>`, `<article>` 等。

2. **`display: inline;` (内联元素/行内元素)**

   - 行为特征：

     - 不独占一行：内联元素不会开始新的一行，它们会像文本一样在同一行内从左到右排列，直到空间不足才会换行 51。
     - 宽度由内容决定：内联元素的宽度由其内部容纳的内容（如文字、图片）决定，不能通过 `width` 属性设置 51。
     - 高度由内容决定：`height` 属性对内联元素无效。其高度通常由 `line-height` 决定。
     - 水平内外边距有效：`margin-left`, `margin-right`, `padding-left`, `padding-right` 会产生效果。
     - 垂直内外边距无效或表现特殊：`margin-top`, `margin-bottom`, `padding-top`, `padding-bottom` 虽然在视觉上可能显示出来，但通常不会推开上下相邻的块级元素，可能会发生重叠。
     
   - **常见默认内联元素**：`<a>`, `<span>`, `<em>`, `<strong>`, `<img>`, `<input>`, `<button>` 
     (虽然 `<img>`, `<input>`, `<button>` 有些特殊行为，有时被称为“可替换内联元素”或“行内块元素”的雏形，但其基础行为是内联的)。
   
3. **`display: none;` (隐藏元素)**

   - 行为特征：

     - 元素彻底消失：设置了 `display: none;` 的元素将不会在页面上显示，并且它所占据的空间也会被释放，就好像这个元素从未存在过一样 53。
     - 与 `visibility: hidden;` 的区别：`visibility: hidden;` 也会隐藏元素，但元素所占据的空间仍然保留在页面布局中，只是内容不可见 56。`display: none;` 则是完全从渲染树中移除。
     
   - **用途**：常用于通过 JavaScript 动态显示或隐藏元素，例如下拉菜单、模态框等。

`display` 属性的威力在于它能够改变 HTML 元素的默认“角色”。比如，您可以将一个默认是块级的 `<li>` 元素设置为 `display: inline;` 或 `display: inline-block;` (一种结合了块级和内联特性的值，此处不展开)，使它们水平排列，从而创建水平导航菜单。反之，也可以将一个默认是内联的 `<a>` 链接设置为 `display: block;`，使其能够拥有独立的宽度和高度，表现得像一个按钮。理解 `display` 属性的这些基本值是掌握 CSS 页面布局的起点，它揭示了 CSS 如何覆盖浏览器的默认行为，并重新定义元素间的互动方式。

## 5. CSS 单位详解**

在 CSS 中，我们需要使用各种单位来定义元素的尺寸（如宽度、高度）、内外边距、字体大小等。

### **A. 绝对单位：固定不变的标尺**

绝对单位的值是固定的，不依赖于其他元素的尺寸或浏览器设置。

- `px` (像素 - Pixels)

  - **定义**：像素是最常用的绝对单位，代表屏幕上的一个物理点 57。`1px` 就是屏幕上的一个像素点。
- **特点**：尺寸固定，在不同设备和设置下，`1px` 的物理大小可能不同（取决于屏幕像素密度 DPI），但其代表的“一个像素”的概念是恒定的。
  - **注意事项**：如果用 `px` 定义文本字体大小，当用户在浏览器中缩放页面或调整默认字体大小时，以 `px` 为单位的文本可能不会相应缩放，从而影响可访问性 57。因此，对于文本，更推荐使用相对单位。
- **示例**：`div { width: 200px; height: 100px; font-size: 16px; }`

### **B. 相对单位：灵活应变的度量**

相对单位的值是相对于其他长度值来计算的，这使得它们在构建响应式和可伸缩的界面时非常有用。

#### 1. **`%` (百分比 - Percentages)**

- **定义**：百分比单位的值是相对于其**父元素**的同一属性的值来计算的。

- **特点**：非常适合创建流式布局，即元素的尺寸会随着其容器尺寸的变化而变化。

- 示例：

  - `div.child { width: 50%; }`：如果这个 `div` 的父元素的宽度是 `600px`，那么这个 `div` 的宽度将是 `300px`。
  - `p { font-size: 120%; }`：段落的字体大小将是其父元素字体大小的 1.2 倍。
  - `img { max-width: 100%; height: auto; }`：常用于使图片自适应其容器宽度，同时保持宽高比。
  
- 何时使用：

  - 创建流式布局，使元素的宽度或高度随父容器变化。
- 设置内边距、外边距等相对于父元素尺寸的间距。

#### 2. **`em`**

- 定义：

  - 当用于设置**字体大小 (`font-size`)** 时，`1em` 等于其**父元素**的字体大小。
  - 当用于设置**其他属性**（如 `width`, `height`, `padding`, `margin`, `line-height` 等）时，`1em` 等于**当前元素自身**计算后的字体大小。
  
- **特点**：`em` 单位具有继承性，如果多层嵌套的元素都使用 `em` 作为字体单位，其最终的计算值会逐层相乘，这可能导致意外的字体大小（“复合效应”。

- 示例：

  ```html
  <div style="font-size: 20px;"> <p style="font-size: 1.5em;"> 这段文字的字体大小是 30px。
          <span style="font-size: 0.5em;"> 这段文字的字体大小是 15px。
          </span>
      </p>
      <div style="font-size: 1em; padding: 2em;"> 内边距是40px。
      </div>
  </div>
  ```
  
- 何时使用：

  - 当希望元素的尺寸（如内外边距、宽度）能够随着其字体大小的变化而等比例缩放时。
- 创建可伸缩的组件，其内部元素的尺寸都相对于该组件的根字体大小。

#### 3. **`rem` (Root em)**

- **定义**：`rem` 单位的值是相对于**根元素 (`<html>`)** 的字体大小来计算的。

- **特点**：`rem` 避免了 `em` 单位在嵌套使用时可能出现的复合效应问题。无论元素嵌套多深，`1rem` 的值始终等于根元素的字体大小。这使得使用 `rem` 进行全局字体大小和间距控制更加简单和可预测。

- 示例：

  ```css
  html {
    font-size: 16px; /* 设置根元素的字体大小为 16px，这是很多浏览器的默认值 */
  }
  h1 {
    font-size: 2rem; /* h1 的字体大小 = 16px * 2 = 32px */
  }
  p {
    font-size: 1rem; /* p 的字体大小 = 16px * 1 = 16px */
    padding: 1.5rem; /* p 的内边距 = 16px * 1.5 = 24px */
  }
  ```
  
- 何时使用：

  - 设置全局的字体大小、间距（内外边距），以实现整个网站的等比例缩放。
  - 在响应式设计中，可以通过媒体查询改变根元素的字体大小，从而方便地调整整个页面的尺寸。
  - 目前是构建可访问和响应式网站时，非常推荐使用的单位，尤其是对于字体大小。

**常见 CSS 单位对比表**

| **单位** | **类型** | **相对于**                                                   | **常见用途**                               | **示例**                              |
| -------- | -------- | ------------------------------------------------------------ | ------------------------------------------ | ------------------------------------- |
| `px`     | 绝对单位 | 屏幕物理像素                                                 | 固定尺寸、边框、小图标                     | `border: 1px solid; font-size: 14px;` |
| `%`      | 相对单位 | 父元素的同一属性值                                           | 流式布局宽度/高度、相对父元素的间距        | `width: 75%; padding: 5%;`            |
| `em`     | 相对单位 | 父元素的字体大小 (用于font-size) <br> 当前元素的字体大小 (用于其他属性) | 随字体大小缩放的间距、组件内部相对尺寸     | `font-size: 1.2em; margin: 0.5em;`    |
| `rem`    | 相对单位 | 根元素 (`<html>`) 的字体大小                                 | 全局字体大小、整体布局缩放、一致的间距体系 | `font-size: 1.6rem; padding: 1rem;`   |

------

## 6. 层叠、特异性和继承

当多个 CSS 规则同时作用于同一个 HTML 元素，并且这些规则定义了相同的属性时，浏览器如何决定最终应用哪个样式呢？这就涉及到 CSS 的三个核心概念：**层叠 (Cascade)**、**特异性 (Specificity)** 和 **继承 (Inheritance)**。理解它们是解决 CSS 样式冲突、编写可预测和可维护代码的关键。

### **A. CSS 的“C” - 层叠 (Cascading)**

“层叠”是 CSS 名称的由来，它描述了浏览器合并来自不同来源的样式表，并解决样式规则冲突的过程。样式规则可以来自以下几个主要来源，它们有一个大致的优先级顺序（从低到高）：

1. **浏览器默认样式 (User Agent Stylesheets)**：每个浏览器都有一套内置的默认样式表，用于在没有任何自定义样式的情况下显示 HTML 元素。例如，链接默认是蓝色有下划线，`<h1>` 字体较大且加粗等。这些是最低优先级的样式。
2. **用户样式表 (User Stylesheets)**：一些浏览器允许用户自定义样式表，以覆盖网站的样式，满足个人偏好或可访问性需求。这种情况相对较少。
3. **作者样式表 (Author Stylesheets)**：这是由网页开发者编写的 CSS，是我们学习和应用的主要部分。它可以是外部链接的 `.css` 文件，也可以是 HTML 文档内部的 `<style>` 标签中的样式。
4. **内联样式 (Inline Styles)**：直接在 HTML 元素的 `style` 属性中定义的样式。通常具有非常高的优先级。
5. **`!important` 规则**：在任何声明的末尾（分号前）添加 `!important` 标记，可以使其优先级高于其他所有来源的规则（即使是内联样式或更高特异性的选择器）。**但应极力避免滥用 `!important`**，因为它会破坏正常的层叠规则，使得样式难以调试和维护。

当不同来源的样式发生冲突时，浏览器会按照这个层叠顺序来决定哪个样式生效。

### B. 特异性 (Specificity) - 规则的“重要性”评分

当多条来自“作者样式表”的规则指向同一个元素的同一个属性时，浏览器会通过计算选择器的**特异性**来决定哪条规则胜出。特异性可以理解为一条规则的“精确度”或“重要性”的量化评分。

一个简化的特异性层级（从高到低）如下：

1. ID 选择器 (`#myid`)：具有最高的特异性。针对特定 ID 的规则通常会覆盖其他类型的选择器。

   - 例如：`#main-title { color: red; }`

2. 类选择器 (`.myclass`)、属性选择器 (`[type="text"]`)、伪类 (`:hover`)：特异性居中。多个此类选择器组合会增加特异性。

   - 例如：`.button { background-color: blue; }` 或 `a:hover { color: orange; }`

3. 元素选择器 (`p`, `div`)、伪元素 (`::before`)：特异性较低。

   - 例如：`p { font-size: 16px; }`

4. 通配选择器 (`\*`)、组合符 (`>`, `+`, `~`) 和 `:where()` 伪类：它们本身不增加特异性或特异性为0。

计算特异性：

浏览器通常会为每个选择器计算一个由三或四个部分组成的“特异性值”（例如，可以想象成 (ID数量, 类/属性/伪类数量, 元素/伪元素数量)）。比较时，从左到右逐个比较这些部分的数量，数值大的胜出。

源顺序 (Source Order)：

如果两条规则的特异性完全相同，那么在样式表中后出现的那条规则将覆盖先出现的规则。

**示例**：

```html
<p id="intro" class="highlight">这是一个段落。</p>
```

```css
/* 规则1: 元素选择器 */
p { color: blue; }

/* 规则2: 类选择器 */
.highlight { color: green; }

/* 规则3: ID 选择器 */
#intro { color: red; }
```

在这个例子中，段落的最终颜色将是**红色**，因为 ID 选择器 (`#intro`) 的特异性高于类选择器 (`.highlight`) 和元素选择器 (`p`)。

如果再添加一条规则：

```css
/* 规则4: 元素选择器 + 类选择器 */
p.highlight { color: purple; }
```

现在，`p.highlight` (特异性高于单纯的 `.highlight`) 会覆盖规则2，但仍然低于规则3 (ID选择器)。所以文本颜色依然是红色。

如果再添加一条特异性与规则3相同的规则，但位置在规则3之后：

```css
/* 规则3: ID 选择器 */
#intro { color: red; }
/* 规则5: 另一条ID选择器，特异性相同，但后出现 */
#intro { color: orange; }
```

则文本颜色将变为**橙色**，因为规则5后出现。

### C. 继承 (Inheritance) - 样式“代代相传”

继承是指某些 CSS 属性的值，当应用到一个父元素上时，会自动被其子元素“继承”下来，除非子元素明确地为该属性设置了其他值。

- 可继承的属性示例：

  - 文本相关属性：`color`, `font-family`, `font-size`, `font-weight`, `font-style`, `line-height`, `text-align` 等。
  - 列表属性：`list-style`, `list-style-type` 等。
  - 可见性：`visibility`。
  
- 不可继承的属性示例：

  - 盒子模型属性：`width`, `height`, `padding`, `margin`, `border`。
  - 背景属性：`background-color`, `background-image`。
  - 定位属性：`position`, `top`, `left`。
  - `display` 属性。

**示例**：

```html
<body style="font-family: Arial, sans-serif; color: #333;">
    <h1>主标题</h1> <p>这是一个段落，它也会继承字体和颜色。
        <em>这段强调文本同样会继承。</em>
    </p>
    <div style="border: 1px solid black;"> 这个 div 内部的文本会继承 body 的字体和颜色。
    </div>
</body>
```

在这个例子中，`<h1>`, `<p>`, `<em>` 元素都会继承 `<body>` 元素设置的 `font-family` 和 `color`。而 `<div>` 的 `border` 属性则不会被其内部文本继承。


